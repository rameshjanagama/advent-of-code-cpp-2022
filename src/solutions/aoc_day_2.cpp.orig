#include <string>
#include <vector>
#include <iostream>
#include <sstream>
#include <cstdlib>
#include <algorithm>

#include "aoc_day_2.h"
#include "file_utils.h"
#include "set"

using namespace std;

AocDay2::AocDay2():AocDay(2)
{
}

AocDay2::~AocDay2()
{
}

auto AocDay2::read_input(string filename)
{
    FileUtils fileutils;
    vector<string> raw_lines;
    vector<string> data;
    if (!fileutils.read_as_list_of_strings(filename, raw_lines))
    {
        cerr << "Error reading in the data from " << filename << endl;
        return data;
    }
    for (auto iter = raw_lines.begin(); iter != raw_lines.end(); ++iter)
    {
        //long l;
        //string to_convert = *data;
        //l = strtol(to_convert.c_str(), NULL, 10);
        data.push_back(*iter);
    }
    return data;
}

string AocDay2::part1(string filename, vector<string> extra_args)
{
    auto data = read_input(filename);
    long score = 0;
    for (int i=0;i<data.size();i++)
    {
		if (data[i][0] == 'A' && data[i][2] == 'X' ) {
			score+= (1+3);
		}
		else if (data[i][0] == 'A' && data[i][2] == 'Y' ) {
			score+= (2+6);
		}
		else if (data[i][0] == 'A' && data[i][2] == 'Z' ) {
			  score+= (3+0);
		}
		else if (data[i][0] == 'B' && data[i][2] == 'X' ) {
			score+= (1+0);
		}
		else if (data[i][0] == 'B' && data[i][2] == 'Y' ) {
			score+= (2+3);
		}
		else if (data[i][0] == 'B' && data[i][2] == 'Z' ) {
			  score+= (3+6);
		}
		else if (data[i][0] == 'C' && data[i][2] == 'X' ) {
			score+= (1+6);
		}
		else if (data[i][0] == 'C' && data[i][2] == 'Y' ) {
			 score+= (2+0);
		}
		else if (data[i][0] == 'C' && data[i][2] == 'Z' ) {
			 score+= (3+3);
		}
    }
    ostringstream out;
    out << score;
    return out.str();
}

string AocDay2::part2(string filename, vector<string> extra_args)
{
    auto data = read_input(filename);
    for (int i=0;i<data.size();i++)
    {	    
                if (data[i][0] == 'A' && data[i][2] == 'X' ) {
                        data[i][2]='Z';
                }
                else if (data[i][0] == 'A' && data[i][2] == 'Y' ) {
                        data[i][2]='X';
                }
                else if (data[i][0] == 'A' && data[i][2] == 'Z' ) {
                          data[i][2]='Y';
                }
                else if (data[i][0] == 'B' && data[i][2] == 'X' ) {
                        data[i][2]='X';
                }
                else if (data[i][0] == 'B' && data[i][2] == 'Y' ) {
                        data[i][2]='Y';
                }
                else if (data[i][0] == 'B' && data[i][2] == 'Z' ) {
                        data[i][2]='Z';
                }
                else if (data[i][0] == 'C' && data[i][2] == 'X' ) {
                       data[i][2]='Y';
                }
                else if (data[i][0] == 'C' && data[i][2] == 'Y' ) {
                        data[i][2]='Z';
                }
                else if (data[i][0] == 'C' && data[i][2] == 'Z' ) {
                        data[i][2]='X';
                }
    }
    long score = 0;
    for (int i=0;i<data.size();i++)
    {
                if (data[i][0] == 'A' && data[i][2] == 'X' ) {
                        score+= (1+3);
                }
                else if (data[i][0] == 'A' && data[i][2] == 'Y' ) {
                        score+= (2+6);
                }
                else if (data[i][0] == 'A' && data[i][2] == 'Z' ) {
                          score+= (3+0);
                }
                else if (data[i][0] == 'B' && data[i][2] == 'X' ) {
                        score+= (1+0);
                }
                else if (data[i][0] == 'B' && data[i][2] == 'Y' ) {
                        score+= (2+3);
                }
                else if (data[i][0] == 'B' && data[i][2] == 'Z' ) {
                          score+= (3+6);
                }
                else if (data[i][0] == 'C' && data[i][2] == 'X' ) {
                        score+= (1+6);
                }
                else if (data[i][0] == 'C' && data[i][2] == 'Y' ) {
                         score+= (2+0);
                }
                else if (data[i][0] == 'C' && data[i][2] == 'Z' ) {
                         score+= (3+3);
                }
    }
    ostringstream out;
    out << score;
    return out.str();
}
